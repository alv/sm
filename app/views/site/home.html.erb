<%- if user_signed_in? %>
  <div id="ask-box">
  	<%= render 'questions/form' %> 
  </div>
<% end -%>

<div id="questions-box">
	<div id="questions-header">
		<ul id="questions-header-menu">
			<li><%= link_to "Recientes", root_path, :title => "Ver las preguntas recientes", :class => "questions-header-menu-item selected" %></li>
			<li><%= link_to "Sin responder", root_path(:scoped_questions => 'without_answers'), :title => "Ver las preguntas sin responder", :class => "questions-header-menu-item" %></li>
			<li><%= link_to "Populares", root_path(:scoped_questions => 'populars'), :title => "Ver las preguntas populares", :class => "questions-header-menu-item" %></li>
		</ul>
	</div>

	<ul id="questions-list">
		<%- if @questions.empty? %>
			Aún no hay preguntas disponibles.
		<% else %>
			<%- @questions.each do |question| %>
				<li class="question">
					<%= link_to content_tag(:span, "☆"), root_path, :title => "Fav", :class => "command-item star" %>

					<div class="commands">
						<div class="replies clearfix">
							<%= link_to question.answers_count, question, :title => "Ve a las respuestas", :class => "comments" %>
							<%= link_to content_tag(:span, "Responder"), question_path(question) + '#new_answer', :title => "Responder", :class => "command-item reply" %>
						</div>
						<%- if 1 == 0 #if user_signed_in? %>
							<div class="votes">
								<!-- Positive vote form: Change format (:html to :json) to do this with JS -->
								<%= form_for(@vote, :format => :html) do |f| %>
		              <%= f.hidden_field :user_id, :value => current_user.id %>
									<%= f.hidden_field :value, :value => 1 %>
									<%= f.hidden_field :votable_id, :value => question.id %>
									<%= f.hidden_field :votable_type, :value => question.class %>
									<div class="actions">
		              	<%= f.submit '+', :id => "vote_submit_#{question.id}" %>
		              </div>
		            <% end %>
								<!-- Negative vote form: Change format (:html to :json) to do this with JS  -->
								<%= form_for(@vote, :format => :html) do |f| %>
		              <%= f.hidden_field :user_id, :value => current_user.id %>
									<%= f.hidden_field :value, :value => -1 %>
									<%= f.hidden_field :votable_id, :value => question.id %>
									<%= f.hidden_field :votable_type, :value => question.class %>
									<div class="actions">
		              	<%= f.submit '-', :id => "vote_submit_#{question.id}" %>
		              </div>
		            <% end %>
								<%= link_to content_tag(:span, "+"), root_path, :title => "Voto positivo", :class => "command-item up" %>
								<%= link_to content_tag(:span, "-"), root_path, :title => "Voto negativo", :class => "command-item down" %>
							</div>
						<% end -%>
					</div>

					<h2 class="question-title"><%= link_to question.title, question, :title => "Enlace permanente a #{question.title}" %></h2>
					<p class="question-description"><%= question.description %></p>

					<div class="question-meta">
						<ul class="tags">
							<li class="tag"><%= link_to content_tag(:span, "+"), root_path, :title => "Sigue el tema Cocina", :class => "tag-follow" %><%= link_to "Cocina", root_path, :title => "Ve al tema Cocina", :class => "tag-link" %></li>
							<li class="tag"><%= link_to content_tag(:span, "+"), root_path, :title => "Sigue el tema Limpieza", :class => "tag-follow tag-followed" %><%= link_to "Limpieza", root_path, :title => "Ve al tema Limpieza", :class => "tag-link" %></li>
							<li class="tag"><%= link_to content_tag(:span, "+"), root_path, :title => "Sigue el tema Dinero", :class => "tag-follow" %><%= link_to "Dinero", root_path, :title => "Ve al tema Dinero", :class => "tag-link" %></li>
						</ul>

						<p>Por <%= link_to question.user.name, root_path %> hace <%= time_ago_in_words(question.created_at) %></p>
					</div>
				</li>
			<% end -%>
		<% end -%>
	</ul>

	<div id="questions-footer">
		<%= link_to 'Cargar más', "javascript:void(0);", :title => "Carga más preguntas", :class => "load-more" %>
		<%- if user_signed_in? %>
			<%= link_to 'Nueva pregunta', root_path(:scoped_questions => params[:scoped_questions]) + '#new_question', :title => "Crea una nueva pregunta", :class => "new-question" %>
		<% end -%>
	</div>
</div>